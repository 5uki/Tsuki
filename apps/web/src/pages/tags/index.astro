---
import Default from '@/layouts/Default.astro'
import { createAppContext } from '@entry/index'
import { getSidebarData } from '@usecases/content'

export const prerender = true

const ctx = createAppContext()
const sidebarData = await getSidebarData(ctx)
---

<Default title="标签" description="所有标签">
  <section class="page-section" transition:name="page-card">
    <h1 class="tsuki-page-title">标签</h1>
    {sidebarData.tags.length > 0 ? (
      <div class="tag-grid">
        {sidebarData.tags.map((tag) => (
          <a href={`/tags/${tag.slug}`} class="tag-card">
            <span>{tag.name}</span>
            <span class="tag-count">
              {tag.count}
            </span>
          </a>
        ))}
      </div>
    ) : (
      <p class="tsuki-empty-state">暂无标签</p>
    )}
  </section>
</Default>

<style>
  .page-section {
    margin-bottom: var(--tsuki-space-2);
  }

  .tag-grid {
    display: flex;
    flex-wrap: wrap;
    gap: var(--tsuki-space-0-5);
  }

  .tag-card {
    display: inline-flex;
    align-items: center;
    gap: var(--tsuki-space-0-35);
    border-radius: var(--tsuki-radius-md);
    border: 1px solid var(--tsuki-surface-border);
    background: var(--tsuki-surface-muted-soft);
    padding: var(--tsuki-space-0-5) var(--tsuki-space-0-75);
    font-size: var(--tsuki-text-sm);
    color: var(--tsuki-fg);
    text-decoration: none;
    transition: background-color var(--tsuki-motion-fast) var(--tsuki-motion-ease-out),
                transform var(--tsuki-motion-fast) var(--tsuki-motion-ease-out),
                border-color var(--tsuki-motion-fast) var(--tsuki-motion-ease-out);
  }
  .tag-card:hover {
    transform: translateY(var(--tsuki-translate-1px));
    border-color: var(--tsuki-theme-accent);
    background: var(--tsuki-surface-accent-soft);
  }

  .tag-count {
    border-radius: var(--tsuki-radius-sm-2);
    background: var(--tsuki-theme-secondary);
    padding: var(--tsuki-space-0-125) var(--tsuki-space-0-45);
    font-size: var(--tsuki-text-2xs);
    color: var(--tsuki-fg);
  }
</style>
