---
import Default from '@/layouts/Default.astro'
import PostCard from '@/components/content/PostCard.astro'
import tsukiConfig from '@/config/tsuki-config'
import { toPostCardItems } from '@/lib/utils/post-cards'
import { getPostEntries } from '@/lib/content'

export const prerender = true

const posts = await getPostEntries()
const recentPosts = toPostCardItems(posts)
---

<Default description={tsukiConfig.site.description}>
  <section class="page-section">
    {recentPosts.length > 0 ? (
      <div class="tsuki-card-list">
        {recentPosts.map((post) => (
          <PostCard post={post} />
        ))}
      </div>
    ) : (
      <p class="tsuki-empty-state">暂无文章</p>
    )}
  </section>
</Default>

<style>
  .page-section {
    margin-bottom: var(--tsuki-space-3xl);
  }
</style>
