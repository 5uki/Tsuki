---
import Default from '@/layouts/Default.astro'
import MainLayout from '@/components/MainLayout.astro'
import tsukiConfig from '@/config/tsuki-config'

// 模拟数据 - 后续接 API 获取
const recentPosts = [
  {
    slug: 'getting-started-with-cloudflare',
    title: '使用 Cloudflare 构建现代 Web 应用',
    summary:
      '探索如何利用 Cloudflare 的免费套餐构建高性能的全栈应用，包括 Pages、Workers 和 D1 数据库的实战经验。',
    publishedAt: '2026-01-15',
    tags: ['Cloudflare', 'Web开发'],
    readingTime: 8,
  },
  {
    slug: 'astro-ssr-deep-dive',
    title: 'Astro SSR 深度解析：从零到生产',
    summary:
      '深入了解 Astro 的服务端渲染机制，以及如何在 Cloudflare Pages 上部署 SSR 应用。',
    publishedAt: '2026-01-12',
    tags: ['Astro', 'SSR'],
    readingTime: 12,
  },
  {
    slug: 'typescript-best-practices',
    title: 'TypeScript 最佳实践 2026',
    summary: '总结 TypeScript 项目中的最佳实践，包括类型设计、错误处理和性能优化技巧。',
    publishedAt: '2026-01-08',
    tags: ['TypeScript'],
    readingTime: 15,
  },
]


---

<Default description={tsukiConfig.site.description}>
  <MainLayout>
    <section class="posts-section">
      <div class="posts-list">
        {recentPosts.map((post) => (
          <article class="post-card">
            <div class="post-card-content">
              <div class="post-meta">
                <time>{post.publishedAt}</time>
                <span class="separator">·</span>
                <span>{post.readingTime} 分钟阅读</span>
              </div>
              <h3 class="post-title">
                <a href={`/posts/${post.slug}`}>{post.title}</a>
              </h3>
              <p class="post-summary">{post.summary}</p>
              <div class="post-tags">
                {post.tags.map((tag) => (
                  <a href={`/tags/${tag.toLowerCase()}`} class="tag">#{tag}</a>
                ))}
              </div>
            </div>
          </article>
        ))}
      </div>
    </section>
  </MainLayout>
</Default>

<style>
  .posts-section {
    margin-bottom: 2rem;
  }

  .posts-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .post-card {
    background: var(--tsuki-card-bg);
    border: 1px solid var(--tsuki-border);
    border-radius: var(--tsuki-sidebar-card-radius);
    overflow: hidden;
    transition: border-color 0.15s, box-shadow 0.15s, transform 0.15s;
  }

  .post-card:hover {
    border-color: var(--tsuki-primary);
    box-shadow: var(--tsuki-card-shadow);
    transform: translateY(-2px);
  }

  .post-card-content {
    padding: 1.25rem 1.5rem;
  }

  .post-meta {
    font-size: 0.8125rem;
    color: var(--tsuki-muted);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .separator {
    opacity: 0.5;
  }

  .post-title {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0 0 0.5rem;
    line-height: 1.4;
  }

  .post-title a {
    color: var(--tsuki-fg);
    text-decoration: none;
  }

  .post-title a:hover {
    color: var(--tsuki-primary);
    text-decoration: none;
  }

  .post-summary {
    font-size: 0.9375rem;
    color: var(--tsuki-muted);
    margin: 0 0 1rem;
    line-height: 1.6;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .post-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .tag {
    font-size: 0.75rem;
    color: var(--tsuki-primary);
    background: color-mix(in srgb, var(--tsuki-primary) 10%, transparent);
    padding: 0.25rem 0.625rem;
    border-radius: 1rem;
    text-decoration: none;
    transition: background-color 0.15s;
  }

  .tag:hover {
    background: color-mix(in srgb, var(--tsuki-primary) 20%, transparent);
    text-decoration: none;
  }

  @media (max-width: 640px) {
    .post-card-content {
      padding: 1rem 1.25rem;
    }

    .post-title {
      font-size: 1rem;
    }

    .post-summary {
      font-size: 0.875rem;
    }
  }
</style>
