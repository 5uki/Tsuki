---
import Default from '@/layouts/Default.astro'
import PostCard from '@/components/PostCard.astro'
import tsukiConfig from '@/config/tsuki-config'
import { toPostCardItems } from '@atoms/post-cards'
import { createAppContext } from '@entry/index'
import { getPostCards } from '@usecases/content'

const ctx = createAppContext()
const posts = await getPostCards(ctx)
const recentPosts = toPostCardItems(posts)
---

<Default description={tsukiConfig.site.description}>
  <section class="mb-[var(--tsuki-space-2)]" transition:name="page-card">
    {recentPosts.length > 0 ? (
      <div class="flex flex-col gap-[var(--tsuki-space-1)]">
        {recentPosts.map((post) => (
          <PostCard post={post} />
        ))}
      </div>
    ) : (
      <p class="italic text-[color:var(--tsuki-fg)]">暂无文章</p>
    )}
  </section>
</Default>
