name = "tsuki-api"
main = "entry/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# ── 公开配置（可提交到 Git）──────────────────
[vars]
# ✏️ 必须修改：你的站点前端地址（用于 CORS Origin 校验）
TSUKI_PUBLIC_ORIGIN = "http://localhost:4321"
# ✏️ 必须修改：管理员的 GitHub 用户 ID（逗号分隔）
TSUKI_ADMIN_GITHUB_IDS = "252399409"

# 会话有效期（毫秒），默认 14 天
TSUKI_SESSION_TTL_MS = "1209600000"

# ── 秘密配置（请写入 .dev.vars，不要提交到 Git）────
# 在 services/tsuki-api/.dev.vars 文件中配置以下变量：
#
#   GITHUB_OAUTH_CLIENT_ID=Ov23li...
#   GITHUB_OAUTH_CLIENT_SECRET=your_secret
#   TSUKI_SESSION_SIGNING_SECRET=随机字符串
#   TSUKI_CSRF_SALT=另一个随机字符串
#
# 生产环境使用 wrangler secret put 写入

# ── D1 数据库绑定 ────────────────────────────
[[d1_databases]]
binding = "DB"
database_name = "tsuki_db"
database_id = "placeholder-replace-with-actual-id"
